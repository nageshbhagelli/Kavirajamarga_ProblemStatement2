from word_joiner import KannadaWordBuilder

def test_vibhakti():
    print("--- Testing Vibhakti Features  ---")
    builder = KannadaWordBuilder()
    
    test_cases = [
    # === DATIVE (ಗೆ / ಕ್ಕೆ / ವಿಗೆ / ಯಿಗೆ) ===
    ("ಮನೆ", "ಗೆ", "ಮನೆಗೆ"),              # consonant ending → ಗೆ
    ("ಹಳ್ಳಿ", "ಗೆ", "ಹಳ್ಳಿಗೆ"),            # vowel-ending (ಇ) → ಗೆ
    ("ಮಗು", "ಗೆ", "ಮಗುವಿಗೆ"),             # ಉ → ವಿ + ಗೆ
    ("ಕೇಳು", "ಗೆ", "ಕೇಳುವಿಗೆ"),            # ಉ → ವಿ
    ("ಸ್ಥಳ", "ಗೆ", "ಸ್ಥಳಕ್ಕೆ"),             # ಳ್-ending → ಕ್ಕೆ
    ("ಮಹಲ್", "ಗೆ", "ಮಹಲ್‌ಗೆ"),             # ಲ್ → ಕ್ಕೆ (apostrophe acceptable form)

    # === LOCATIVE (ಲ್ಲಿ / ಅಲ್ಲಿ / ನಲ್ಲಿ / ದಲ್ಲಿ / ಯಲ್ಲಿ) ===
    ("ಮನೆ", "ಅಲ್ಲಿ", "ಮನೆಯಲ್ಲಿ"),            # Mane + alli → Maneyalli
    ("ಸ್ಥಳ", "ಅಲ್ಲಿ", "ಸ್ಥಳದಲ್ಲಿ"),            # Sthala + alli → Sthaladalli
    ("ಹಳ್ಳಿ", "ಅಲ್ಲಿ", "ಹಳ್ಳಿಯಲ್ಲಿ"),          # vowel ending → ಯ +ಲ್ಲಿ
    ("ಮಗು", "ಅಲ್ಲಿ", "ಮಗುವಿನಲ್ಲಿ"),            # ಉ → ವು + ನಲ್ಲಿ
    ("ಪುಸ್ತಕ", "ಅಲ್ಲಿ", "ಪುಸ್ತಕದಲ್ಲಿ"),       # consonant ending → ದಲ್ಲಿ
    ("ನಗರ", "ಅಲ್ಲಿ", "ನಗರದಲ್ಲಿ"),

    # === INSIDE (ಒಳಗೆ / ಒಳರಲ್ಲಿ) ===
    ("ಮನೆ", "ಒಳಗೆ", "ಮನೆಯೊಳಗೆ"),
    ("ಹಳ್ಳಿ", "ಒಳಗೆ", "ಹಳ್ಳಿಯೊಳಗೆ"),
    ("ಮಗು", "ಒಳಗೆ", "ಮಗುವೊಳಗೆ"),

    # === ABLATIVE / INSTRUMENTAL (ಇಂದ / ಯಿಂದ / ವಿಂದ / ದಿಂದ) ===
    ("ಮನೆ", "ಇಂದ", "ಮನೆಯಿಂದ"),
    ("ಸ್ಥಳ", "ಇಂದ", "ಸ್ಥಳದಿಂದ"),
    ("ಹಳ್ಳಿ", "ಇಂದ", "ಹಳ್ಳಿಯಿಂದ"),
    ("ಮಗು", "ಇಂದ", "ಮಗುವಿನಿಂದ"),
    ("ಪುಸ್ತಕ", "ಇಂದ", "ಪುಸ್ತಕದಿಂದ"),
    ("ರಾಜ", "ಇಂದ", "ರಾಜರಿಂದ"),               # animate → ರಿಂದ

    # === ACCUSATIVE (ಅನ್ನು / ಅನ್ನು → ವನ್ನು / ನ್ನು) ===
    ("ಪುಸ್ತಕ", "ಅನ್ನು", "ಪುಸ್ತಕವನ್ನು"),
    ("ಮನೆ", "ಅನ್ನು", "ಮನೆಯನ್ನು"),
    ("ಮಗು", "ಅನ್ನು", "ಮಗುವನ್ನು"),
    ("ಹಣ್ಣು", "ಅನ್ನು", "ಹಣ್ಣನ್ನು"),
    ("ರಾಜ", "ಅನ್ನು", "ರಾಜರನ್ನು"),             # animate masc special form

    # === GENITIVE (ದ / ರ / ಯ / ವ) ===
    ("ಮನೆ", "ದ", "ಮನೆಯ"),                   # Mane → Maneya
    ("ಹಳ್ಳಿ", "ದ", "ಹಳ್ಳಿಯ"),                 # vowel end → ಯ
    ("ಮಗು", "ದ", "ಮಗುವಿನ"),                   # ಉ → ವಿ + ನ
    ("ರಾಜ", "ದ", "ರಾಜರ"),                     # animate → ರ
    ("ಪುಸ್ತಕ", "ದ", "ಪುಸ್ತಕದ"),
    ("ಕಾಶಿ", "ದ", "ಕಾಶಿಯ"),

    # === SOCIATIVE (ಜೊತೆ / ಸಮೇತ) ===
    ("ಮನೆ", "ಜೊತೆ", "ಮನೆಯ ಜೊತೆ"),
    ("ರಾಜ", "ಜೊತೆ", "ರಾಜರ ಜೊತೆ"),
    ("ಮಗು", "ಜೊತೆ", "ಮಗುವಿನ ಜೊತೆ"),

    # === PLURAL + CASE (ಗಳಲ್ಲಿ, ಗಳಿಗೆ,ಗಳಿಂದ) ===
    ("ಮನೆ", "ಗಳಲ್ಲಿ", "ಮನೆಗಳಲ್ಲಿ"),
    ("ಪುಸ್ತಕ", "ಗಳಲ್ಲಿ", "ಪುಸ್ತಕಗಳಲ್ಲಿ"),
    ("ಮಗು", "ಗಳಲ್ಲಿ", "ಮಕ್ಕಳಲ್ಲಿ"),          # irregular plural
    ("ಮನೆ", "ಗಳಿಂದ", "ಮನೆಗಳಿಂದ"),
    ("ಹಳ್ಳಿ", "ಗಳಿಂದ", "ಹಳ್ಳಿಯಿಂದ"),
    ("ಮನೆ", "ಗಳಿಗೆ", "ಮನೆಗಳಿಗೆ"),
    ("ಹಳ್ಳಿ", "ಗಳಿಗೆ", "ಹಳ್ಳಿಗಳಿಗೆ"),

    # === VOCATIVE (ಏ / ಓ) ===
    ("ರಾಮ", "ಏ", "ರಾಮನೇ"),
    ("ಮಣಿ", "ಓ", "ಮಣಿಯೋ"),
]


    passed = 0
    for w1, w2, expected in test_cases:
        output = builder.join_words(w1, w2)
        res = output['result']
        if res == expected:
            print(f"✅ PASS: {w1} + {w2} -> {res}")
            passed += 1
        else:
            print(f"❌ FAIL: {w1} + {w2} -> {res} (Expected: {expected})")

    print(f"\nScore: {passed}/{len(test_cases)}")

if __name__ == "__main__":
    test_vibhakti()